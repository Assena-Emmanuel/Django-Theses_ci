<style>
        .ajoute_champ i{
            font-size: 46px;
        }
</style>
<div class="card pt-3 ps-3 pe-3 ">
    <form action="{% url 'theses_ci:resultat' %}" method="POST" class="d-flex justify-content-center">
        {% csrf_token %}
        <div id="champ_recherche" class=" w-100">
            <div class="d-flex w-100 gap-2 align-items-center">
                <div style="width: 300px;">
                    <select class="form-select js-example-basic-single w-100" name="state">
                        <optgroup label="Description des thèses">
                            <option value="titre">Titre</option>
                            <option value="mot_cles">Mot clés</option>
                            <option value="resume">Résumé</option>
                            <option value="discipline">Discipline</option>
                            <option value="specialite">Spécialité</option>
                        </optgroup>
                        <optgroup label="Personnes liées aux thèses">
                            <option value="auteur">Auteur</option>
                            <option value="directeur_these">Directeur de thèse</option>
                            <option value="president">Président</option>
                            <option value="rapporteur">Rapporteur</option>
                            <option value="examinateur">Examinateur</option>
                        </optgroup>
                        <optgroup label="Structures liées aux thèses">
                            <option value="etablissement">Etablissement</option>
                        </optgroup>
                        <optgroup label="Date">
                            <option value="date_soutenance">Date de soutenance</option>
                        </optgroup>
                    </select>
                </div>
                <div class="w-100">
                    <input type="text" id="input" class="form-control form-control-sm" placeholder="Texte à rechercher">
                </div>
                <div class="">
                    <button class="btn remove-btn"><i  class="fa-solid fa-xmark text-danger" style="font-size: 20px;" ></i></button>
                </div>
            </div>
        </div>
    </form>
    <div class="d-flex justify-content-end mt-3">
        <button class="btn " id="ajoute_champ" ><i class="fa-sharp fa-thin fa-plus text-primary"></i></button>
    </div>
    
</div>

<script>
    $(document).ready(function() {
        
    var newField = `
        <div class="d-flex w-100 gap-2 align-items-center">
            <div style="width: 300px;">
                <select class="form-select js-example-basic-single w-100" name="state">
                    <optgroup label="Description des thèses">
                        <option value="titre">Titre</option>
                        <option value="mot_cles">Mot clés</option>
                        <option value="resume">Résumé</option>
                        <option value="discipline">Discipline</option>
                        <option value="specialite">Spécialité</option>
                    </optgroup>
                    <optgroup label="Personnes liées aux thèses">
                        <option value="auteur">Auteur</option>
                        <option value="directeur_these">Directeur de thèse</option>
                        <option value="president">Président</option>
                        <option value="rapporteur">Rapporteur</option>
                        <option value="examinateur">Examinateur</option>
                    </optgroup>
                    <optgroup label="Structures liées aux thèses">
                        <option value="etablissement">Etablissement</option>
                    </optgroup>
                    <optgroup label="Date">
                        <option value="date_soutenance">Date de soutenance</option>
                    </optgroup>
                </select>
            </div>
            <div class="w-100">
                <input type="text" class="form-control form-control-sm" placeholder="Texte à rechercher">
            </div>
            <div>
                <button class="btn remove-btn"><i  class="fa-solid fa-xmark text-danger" style="font-size: 20px;"></i></button>
            </div>
        </div>`;
           
        for(let i=0; i<2; i++){
            $('#champ_recherche').append(newField);
        }

        $('#ajoute_champ').click(function() {   
            $('#champ_recherche').append(newField);
        });

        $(document).on('click', '.remove-btn', function() {
            $(this).closest('.d-flex').remove();
        });

        $(document).on('change', 'select', function() {
            var selectedValue = $(this).find("option:selected").text();
            $('#selected-value').text('Valeur sélectionnée: ' + selectedValue);
        });

        $(document).on('change', 'select', function() {
            var selectedValue = $(this).find("option:selected").text();
            $(this).closest('.d-flex').find('input[type="text"]').val(selectedValue);
        });


    });
</script>


<script>
    $(document).ready(function() {
        $('.js-example-basic-single').select2();
    });
</script>
